<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>48. Async/Await</title>
</head>

<body>
    <h1>48. Async/Await </h1>


    <script>
        // Async/Await es una forma de manejar promesas en JavaScript de manera más sencilla y legible.
        // Permite escribir código asíncrono de manera similar al código síncrono, lo que facilita su comprensión y mantenimiento.
        // Se utiliza junto con funciones asíncronas y la palabra clave `await` para esperar a que una promesa se resuelva.

        // Ejemplo 1 de uso de Async/Await:

        async function fetchData() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                console.log(data);
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Llamada a la función asíncrona
        fetchData();

        // Ejemplo 1 de uso de Async/Await:
        function cuadraticaPromise(valor) {
            if (typeof valor !== "number") {
                return Promise.reject(new Error("El valor debe ser numerico, no un string o un booleano"));
            }
            return new Promise((resolve, reject) => {
                setInterval(() => {
                    resolve({
                        valor,
                        result: valor * valor
                    })
                }, 100);
            })
        }

        async function cuadraticaDeclaradaAsyncrona() {
            try {
                console.log("Inicio función Asincrona declarada");
                let obj = await cuadraticaPromise(0);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise(1);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise(2);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise(3);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise(4);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise(5);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                console.log("Fin función Asincrona declarada");
                
            } catch (error) {
                console.error("Error en la función asíncrona Declarada:", error);
            }

        }

        // Llamada a la función asíncrona declarada
        cuadraticaDeclaradaAsyncrona();

        // Ejemplo 2 de uso de Async/Await Expresada:

        // Ejemplo 1 de uso de Async/Await:
        function cuadraticaPromise2(valor) {
            if (typeof valor !== "number") {
                return Promise.reject(new Error("El valor debe ser numerico, no un string o un booleano"));
            }
            return new Promise((resolve, reject) => {
                setInterval(() => {
                    resolve({
                        valor,
                        result: valor * valor
                    })
                }, 1000);
            })
        }

        let cuadraticaExpresadaAsincrona = async () => {
            try {
                console.log("Inicio función Asincrona Expresada");
                let obj = await cuadraticaPromise2(0);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise2(1);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise2(2);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise2(3);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise2(4);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                obj = await cuadraticaPromise2(5);
                console.log(`El valor es: ${obj.valor}, El resultado es: ${obj.result}`);

                console.log("Fin función Asincrona Expresada");

            } catch (error) {
                console.error("Error en la función asíncrona Expresada:", error);

            }
        }

        // Llamada a la función asíncrona expresada
        cuadraticaExpresadaAsincrona();

    </script>
</body>

</html>